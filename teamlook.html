<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SoccerNow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>
  <div class = "top-half">
    <div class ="headerdiv">
    <h1>Welcome to SoccerNow</h1>
      <p1>Your one-stop destination for all things soccer! </p1>
       <ul class="nav justify-content-center">
         <li class="nav-item">
          <a class="nav-link btn btn-primary" aria-current="" href="html.html" style="color: white;">Home</a>
         </li>
         <li class="nav-item">
          <a class="nav-link btn btn-primary" href="playerlook.html" style="color: white;">Player Lookup</a>
         </li>
         <li class="nav-item">
          <a class="nav-link btn btn-primary" href="teamlook.html" style="color: white;">Team Lookup</a>
        </li>
      </ul>
    </ul>
  </div>
  <div class="searchbox">
      <h2>Type in a Team Name</h2>
      <form id="Form">
        <input type="text" id="teamname" placeholder="Enter team name" required>
        <br><br>
        <button type="button" onclick="getteamid()">Search</button>
      </form>
  </div>
</div>
  <div class ='bottom-half'>
    <div class="contentbox" id = "content">
      <h2>Team Information</h2>
      <div id="teamInfo"></div>
    </div>
  </div>

<script>
  let previousTeamListHTML = ""; // Variable to store the previous team list HTML
  function getteamid(){
    const teamname = document.getElementById("teamname").value;
    fetch(`https://free-api-live-football-data.p.rapidapi.com/football-teams-search?search=${teamname}`, {
    method: 'GET',
    headers: {
      'X-RapidAPI-Host': 'free-api-live-football-data.p.rapidapi.com',
      'X-RapidAPI-Key': '437e7d4808msh56dc2ac0ee1e393p18c694jsn6f31235f49c8'
    }
  })
    .then(response => response.json())
    .then(data => {
      const suggestions = data.response.suggestions;
      let output = '<h2>Search Results for "' + teamname + '"</h2>';
      suggestions.forEach((team) => {
        output += `<p><a href="#" class="white" onclick="getTeamDetail(${team.id})">${team.name}</a> - League: ${team.leagueName}</p>`;
        });
      previousTeamListHTML = output; 
      document.getElementById("content").innerHTML = output;
    })
      .catch(error => {
      console.error('Error fetching data:', error);
        }); 
      }
      function getTeamDetail(id){
        fetch('https://free-api-live-football-data.p.rapidapi.com/football-get-list-player?teamid=' + id,{
          method: 'GET',
          headers: {
            'X-RapidAPI-Host': 'free-api-live-football-data.p.rapidapi.com',
            'X-RapidAPI-Key': '437e7d4808msh56dc2ac0ee1e393p18c694jsn6f31235f49c8'
          }
        })
        .then(response => response.json())
        .then(data => {
          console.log(data);
          const squad = data?.response?.list?.squad; 

          if (squad && Array.isArray(squad)) {
          let output = "<h2>Squad Member Names</h2>";
          squad.forEach(group => {
          if (group.title) {
          output += `<h3>${group.title.charAt(0).toUpperCase() + group.title.slice(1)}</h3>`;
        }
          group.members?.forEach(member => {
          output += `<p>${member.name} - Age: ${member.age} - Goals: ${member.goals} - Assists: ${member.assists} </p>`;
       });
      });
          output += `<button onclick="restoreTeamList()" class="btn btn-secondary mt-3">Back to Results</button>`;
          document.getElementById("content").innerHTML = output;
          } else {
          
           document.getElementById("content").innerHTML = "<p>No squad data available.</p>";
          }   
    })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
      }
      function restoreTeamList() {
        document.getElementById("content").innerHTML = previousTeamListHTML;
        }  
  

</script>
</body>
</html>